
TODO:
-=-=-


coldstartNotifications: these are button clicks

launchNotification: these are push messages that have been tapped 


need to refactor all this garbage ...



COLDSTART NON interactive PUSHMSG
=================================


{
  "notificationType": "SIMPLEPUSHMSG",
  "notificationId": "3226a84b-17a9-48d5-903b-e3e7d2dc8cd5",
  "msgid": "c59990d0-c3d9-40e3-b308-98f764d06a83",
  "type": "PUSHMSG",
  "aps": {
    "alert": {
      "loc-key": "MSG_PRV",
      "loc-args": [
        "coldstart",
        "in the face from DC"
      ]
    },
    "badge": 1,
    "sound": "Default"
  }
}

COLDSTART  1 button interactive PUSHMSG
========================================

1 button interactive push message needs special handling as it doesn‚Äôt  get reported by the handleActionWithIdentifier delegate. 
The push payload contains all the info so need to look at that to see whether any click analytics need reporting ...


{
  "timestamp": "2016-07-08T07:13:38.6303996Z",
  "notificationType": "SIMPLEPUSHMSG",
  "notificationId": "8cad2455-2c07-450d-a368-c30df98a5cec",
  "sendusrid": "0907e6ff-a7bf-4d0d-8102-98135ac05e43",
  "msgid": "740e82c6-a07e-4621-b676-276bd5d10ddb",
  "type": "PUSHMSG",
  "sendmsgid": "TO6cJuDp/E6jfPGnz/HB8w:12039012",
  "inttype": "OneButton",
  "aps": {
    "sound": "Default",
    "alert": {
      "loc-key": "MSG_PRV",
      "loc-args": [
        "UAT LIKE A BOSS",
        "hello this is a 1 button push üçª"
      ]
    },
    "category": "|F",
    "badge": 1
  },
  "lbl1": "Button",
  "act1": "Open",
  "link1": null
}

COLDSTART  2 button interactive PUSHMSG - clicked the push message rather than a button though
========================================

{
  "timestamp": "2016-07-08T07:18:28.4406711Z",
  "link2": null,
  "notificationId": "64a2a535-320e-489c-8f31-e7d8601b0df2",
  "sendusrid": "0907e6ff-a7bf-4d0d-8102-98135ac05e43",
  "msgid": "f6950b30-2021-4c05-966d-e265ba87add8",
  "lbl2": "View",
  "act2": "Open",
  "type": "PUSHMSG",
  "sendmsgid": "TO6cJuDp/E6jfPGnz/HB8w:12039014",
  "aps": {
    "sound": "Default",
    "alert": {
      "loc-key": "MSG_PRV",
      "loc-args": [
        "UAT LIKE A BOSS",
        "hello this is a 2 button push üçª üçª üçª"
      ]
    },
    "category": "DismissView|B|F",
    "badge": 1
  },
  "lbl1": "Dismiss",
  "notificationType": "SIMPLEPUSHMSG",
  "act1": "Dismiss",
  "inttype": "TwoButton",
  "link1": null
}

if you click a button it is already handled corectly ...







Testplan
-=-=-=-=-


Functional areas to test:

Device registration
    - check deviceId is reused correctly between installs on iOS (16BC1821-9F89-423A-863C-D8E5E231513C for SL Cordova Test)
        - works ok ;-)
    - check operating system is set correctly
        - works ok ;-)

    - analytics
        - check audience in DC (https://stage-control.mobiledonky.com/UserPortal/Analytics/Audience)

        - check activity in DC (https://stage-control.mobiledonky.com/UserPortal/Analytics/Activity)
            - check that device is generating a onventional launch when it is fired up 

Simple push
    - iOS badge count
        - Enable badge count
        - Device managed badge

    - make sure tapping a asic simple push message opens the app if it is: 
        - backgrounded
        - not currently running
    - ensure the message is not re-displayed in above cases when tha app fires up

    - ensure message is displayed in-app if the app is running when the push arrives

    - analytics
        - check activity in DC (https://stage-control.mobiledonky.com/UserPortal/Analytics/Activity)
            - check that device is generating an influenced launch when push message is tapped 



Interactive push
    - dismiss behavoiur

    - open app behaviour
        - check that device is generating an influenced launch when push message is tapped 
    
    - open deep link behaviour

    - analytics
        - https://stage-control.mobiledonky.com/UserPortal/Analytics/CampaignSummarySimplePush
            - ensure button clicks are correctly represented for a given campaign
            - check that device is generating an influenced launch when push message is tapped 

Rich Messaging

    - analytics
        - https://stage-control.mobiledonky.com/UserPortal/Analytics/CampaignSummaryRich
        - check that device is generating an influenced launch when push message is tapped 
        - check that device is generating a correct read status ?

Core Location

    - ensure last known location in DC is as expected




